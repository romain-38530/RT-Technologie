(()=>{var e={};e.id=874,e.ids=[874,888,660],e.modules={8007:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>f,default:()=>x,getServerSideProps:()=>v,getStaticPaths:()=>j,getStaticProps:()=>g,reportWebVitals:()=>S,routeModule:()=>C,unstable_getServerProps:()=>k,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>b});var r={};s.r(r),s.d(r,{default:()=>m});var i=s(4614),a=s(2933),n=s(5059),l=s(6801),c=s.n(l),o=s(50),d=s(997),u=s(6689),h=s(3731);let p="http://3.76.34.154:3000";function m(){let{id:e}=(0,h.useRouter)().query,[t,s]=(0,u.useState)([]),[r,i]=(0,u.useState)([]),[a,n]=(0,u.useState)(!1),[l,c]=(0,u.useState)(null),[o,m]=(0,u.useState)(null),[x,g]=(0,u.useState)(""),[j,v]=(0,u.useState)(""),[f,S]=(0,u.useState)(""),b=(0,u.useMemo)(()=>f?r.filter(e=>e.id.toLowerCase().includes(f)||(e.name||"").toLowerCase().includes(f)||(e.email||"").toLowerCase().includes(f)):r,[r,f]),P=e=>{(e=e.trim())&&s(t=>t.includes(e)?t:[...t,e])},y=e=>s(t=>t.filter(t=>t!==e)),k=async()=>{if(e){n(!0),c(null),m(null);try{await fetch(`${p}/admin/orgs/${e}/invitations`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({invitedCarriers:t})}),m("Invitations mises \xe0 jour")}catch(e){c(e.message||"Erreur r\xe9seau")}finally{n(!1)}}},N=async()=>{if(e){n(!0),c(null),m(null);try{await fetch(`${p}/admin/orgs/${e}/invitations/apply`,{method:"POST",headers:{}}),m("Invitations appliqu\xe9es aux flux existants (stub)")}catch(e){c(e.message||"Erreur r\xe9seau")}finally{n(!1)}}};return e?(0,d.jsxs)("main",{children:[(0,d.jsxs)("h2",{children:["Invitations transporteurs — Org ",e]}),l&&d.jsx("p",{style:{color:"red"},children:l}),o&&d.jsx("p",{style:{color:"green"},children:o}),(0,d.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:12,alignItems:"center"},children:[d.jsx("input",{list:"carrier-suggestions",value:x,onChange:e=>g(e.target.value),placeholder:"ID transporteur (ex: B)"}),d.jsx("datalist",{id:"carrier-suggestions",children:r.map(e=>d.jsx("option",{value:e.id,children:e.name},e.id))}),d.jsx("button",{onClick:()=>{P(x),g("")},disabled:a,children:"Ajouter"})]}),(0,d.jsxs)("div",{style:{marginBottom:12},children:[d.jsx("strong",{children:"Suggestions:"}),d.jsx("div",{style:{margin:"8px 0"},children:d.jsx("input",{value:j,onChange:e=>v(e.target.value),placeholder:"Filtrer par id/nom/email"})}),d.jsx("ul",{children:b.filter(e=>!t.includes(e.id)).slice(0,12).map(e=>(0,d.jsxs)("li",{children:[e.id," — ",e.name," ",e.email?`(${e.email})`:""," ",e.blocked?"— bloqu\xe9 vigilance":"",d.jsx("button",{style:{marginLeft:8},onClick:()=>P(e.id),disabled:a,children:"Ajouter"})]},e.id))})]}),d.jsx("h3",{children:"Transporteurs invit\xe9s"}),d.jsx("ul",{children:t.map(e=>(0,d.jsxs)("li",{children:[e," ",d.jsx("button",{onClick:()=>y(e),disabled:a,children:"Retirer"})]},e))}),(0,d.jsxs)("div",{style:{marginTop:16,display:"flex",gap:8},children:[d.jsx("button",{onClick:k,disabled:a,children:"Enregistrer"}),d.jsx("button",{onClick:N,disabled:a,children:"Appliquer aux flux existants"})]}),d.jsx("p",{style:{marginTop:12},children:d.jsx("a",{href:`/orgs/${e}`,children:"← Retour organisation"})})]}):d.jsx("p",{children:"Chargement…"})}let x=(0,n.l)(r,"default"),g=(0,n.l)(r,"getStaticProps"),j=(0,n.l)(r,"getStaticPaths"),v=(0,n.l)(r,"getServerSideProps"),f=(0,n.l)(r,"config"),S=(0,n.l)(r,"reportWebVitals"),b=(0,n.l)(r,"unstable_getStaticProps"),P=(0,n.l)(r,"unstable_getStaticPaths"),y=(0,n.l)(r,"unstable_getStaticParams"),k=(0,n.l)(r,"unstable_getServerProps"),N=(0,n.l)(r,"unstable_getServerSideProps"),C=new i.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/orgs/[id]/invitations",pathname:"/orgs/[id]/invitations",bundlePath:"",filename:""},components:{App:o.default,Document:c()},userland:r})},50:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(997);function i({Component:e,pageProps:t}){let s=process.env.NEXT_PUBLIC_SUPPORT_URL||"https://www.rt-technologie.com";return r.jsx(r.Fragment,{children:(0,r.jsxs)("div",{className:"app-container",children:[r.jsx("header",{className:"app-header",children:(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("a",{href:"/",className:"logo",children:[r.jsx("div",{className:"logo-icon",children:"RT"}),r.jsx("span",{children:"Backoffice Admin"})]}),(0,r.jsxs)("nav",{className:"main-nav",children:[r.jsx("a",{href:"/",className:"nav-link",children:"Accueil"}),r.jsx("a",{href:"/orgs",className:"nav-link",children:"Organisations"}),r.jsx("a",{href:"/pricing",className:"nav-link",children:"Tarifs"}),r.jsx("a",{href:"/palettes",className:"nav-link",children:"Palettes"}),r.jsx("a",{href:"/health",className:"nav-link",children:"\xc9tat"}),r.jsx("a",{href:s,target:"_blank",rel:"noreferrer",className:"nav-link",children:"Support"}),r.jsx("a",{href:"/login",className:"btn btn-primary btn-sm",children:"Se connecter"})]})]})}),r.jsx("main",{className:"main-content",children:r.jsx(e,{...t})})]})})}s(1882)},1882:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[801,595],()=>s(8007));module.exports=r})();