(()=>{var e={};e.id=654,e.ids=[654,888,660],e.modules={3801:(e,s,a)=>{"use strict";a.r(s),a.d(s,{config:()=>S,default:()=>g,getServerSideProps:()=>f,getStaticPaths:()=>j,getStaticProps:()=>v,reportWebVitals:()=>b,routeModule:()=>A,unstable_getServerProps:()=>_,unstable_getServerSideProps:()=>k,unstable_getStaticParams:()=>N,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>P});var t={};a.r(t),a.d(t,{default:()=>m});var r=a(4614),l=a(2933),n=a(5059),i=a(6801),c=a.n(i),d=a(50),o=a(997),u=a(6689),p=a(3731);let h=[{value:"INDUSTRY_BASE",label:"Industrie — Base (499€)"},{value:"TRANSPORTER_BASE",label:"Transporteur — Base (499€)"}],x=[{value:"AFFRET_IA",label:"Affret.IA"},{value:"PREMIUM_MARKETPLACE",label:"Premium Marketplace"}];function m(){let{id:e}=(0,p.useRouter)().query,[s,a]=(0,u.useState)(null),[t,r]=(0,u.useState)(null),[l,n]=(0,u.useState)(null),[i,c]=(0,u.useState)(!1),[d,m]=(0,u.useState)(null),g=e=>a(s=>{let a=new Set(s.addons||[]);return a.has(e)?a.delete(e):a.add(e),{...s,addons:Array.from(a)}}),v=async()=>{if(e){c(!0),m(null);try{await fetch(`http://3.76.34.154:3000/admin/orgs/${e}/plan`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({plan:s.plan,addons:s.addons||[]})}),alert("Modifications enregistr\xe9es")}catch(e){m(e.message||"Erreur r\xe9seau")}finally{c(!1)}}};return e&&s&&t?(0,o.jsxs)("main",{children:[(0,o.jsxs)("h2",{children:["Organisation ",s.name," (",s.id,")"]}),d&&o.jsx("p",{style:{color:"red"},children:d}),(0,o.jsxs)("p",{children:["R\xf4le: ",s.role," — Statut: ",s.status]}),o.jsx("div",{style:{margin:"12px 0"},children:(0,o.jsxs)("label",{children:["Plan:\xa0",(0,o.jsxs)("select",{value:s.plan||"",onChange:e=>a(s=>({...s,plan:e.target.value})),children:[o.jsx("option",{value:"",children:"—"}),h.map(e=>o.jsx("option",{value:e.value,children:e.label},e.value))]})]})}),(0,o.jsxs)("div",{children:[o.jsx("h3",{children:"Modules compl\xe9mentaires"}),x.map(e=>(0,o.jsxs)("label",{style:{display:"block"},children:[o.jsx("input",{type:"checkbox",checked:(s.addons||[]).includes(e.value),onChange:()=>g(e.value)}),e.label," ",t?.addons?.[e.value]?.monthly?`(+${t.addons[e.value].monthly} €)`:""]},e.value))]}),l&&(0,o.jsxs)("div",{style:{marginTop:12},children:[o.jsx("h3",{children:"Droits effectifs (plan+addons)"}),o.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:l.map(e=>o.jsx("span",{style:{background:"#eef",padding:"4px 8px",borderRadius:6},children:e},e))}),o.jsx("p",{style:{opacity:.7},children:"Note: les transporteurs invit\xe9s h\xe9ritent de ces droits pour les flux appartenant \xe0 cette organisation."})]}),o.jsx("p",{style:{marginTop:12},children:o.jsx("a",{href:`/orgs/${s.id}/invitations`,children:"G\xe9rer les invitations transporteurs →"})}),o.jsx("button",{onClick:v,disabled:i,children:"Enregistrer"})]}):o.jsx("p",{children:"Chargement…"})}let g=(0,n.l)(t,"default"),v=(0,n.l)(t,"getStaticProps"),j=(0,n.l)(t,"getStaticPaths"),f=(0,n.l)(t,"getServerSideProps"),S=(0,n.l)(t,"config"),b=(0,n.l)(t,"reportWebVitals"),P=(0,n.l)(t,"unstable_getStaticProps"),y=(0,n.l)(t,"unstable_getStaticPaths"),N=(0,n.l)(t,"unstable_getStaticParams"),_=(0,n.l)(t,"unstable_getServerProps"),k=(0,n.l)(t,"unstable_getServerSideProps"),A=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/orgs/[id]",pathname:"/orgs/[id]",bundlePath:"",filename:""},components:{App:d.default,Document:c()},userland:t})},50:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});var t=a(997);function r({Component:e,pageProps:s}){let a=process.env.NEXT_PUBLIC_SUPPORT_URL||"https://www.rt-technologie.com";return t.jsx(t.Fragment,{children:(0,t.jsxs)("div",{className:"app-container",children:[t.jsx("header",{className:"app-header",children:(0,t.jsxs)("div",{className:"header-content",children:[(0,t.jsxs)("a",{href:"/",className:"logo",children:[t.jsx("div",{className:"logo-icon",children:"RT"}),t.jsx("span",{children:"Backoffice Admin"})]}),(0,t.jsxs)("nav",{className:"main-nav",children:[t.jsx("a",{href:"/",className:"nav-link",children:"Accueil"}),t.jsx("a",{href:"/orgs",className:"nav-link",children:"Organisations"}),t.jsx("a",{href:"/pricing",className:"nav-link",children:"Tarifs"}),t.jsx("a",{href:"/palettes",className:"nav-link",children:"Palettes"}),t.jsx("a",{href:"/health",className:"nav-link",children:"\xc9tat"}),t.jsx("a",{href:a,target:"_blank",rel:"noreferrer",className:"nav-link",children:"Support"}),t.jsx("a",{href:"/login",className:"btn btn-primary btn-sm",children:"Se connecter"})]})]})}),t.jsx("main",{className:"main-content",children:t.jsx(e,{...s})})]})})}a(1882)},1882:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[801,595],()=>a(3801));module.exports=t})();