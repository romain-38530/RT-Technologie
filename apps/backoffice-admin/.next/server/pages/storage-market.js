(()=>{var e={};e.id=739,e.ids=[739,888,660],e.modules={5059:(e,s)=>{"use strict";Object.defineProperty(s,"l",{enumerable:!0,get:function(){return function e(s,t){return t in s?s[t]:"then"in s&&"function"==typeof s.then?s.then(s=>e(s,t)):"function"==typeof s&&"default"===t?s:void 0}}})},7063:(e,s,t)=>{"use strict";t.r(s),t.d(s,{config:()=>b,default:()=>g,getServerSideProps:()=>p,getStaticPaths:()=>x,getStaticProps:()=>u,reportWebVitals:()=>j,routeModule:()=>P,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>v});var a={};t.r(a),t.d(a,{default:()=>h});var r=t(4614),n=t(2933),i=t(5059),c=t(6801),l=t.n(c),o=t(50),d=t(997),m=t(6689);function h(){let[e,s]=(0,m.useState)(null),[t,a]=(0,m.useState)(!0),[r,n]=(0,m.useState)(null);return t?d.jsx("div",{className:"container mx-auto p-6",children:d.jsx("div",{className:"flex items-center justify-center py-12",children:(0,d.jsxs)("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Chargement des statistiques..."})]})})}):r||!e?d.jsx("div",{className:"container mx-auto p-6",children:d.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,d.jsxs)("p",{className:"text-red-800",children:["Erreur: ",r||"Impossible de charger les statistiques"]})})}):(0,d.jsxs)("div",{className:"container mx-auto p-6",children:[d.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard Bourse de Stockage"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Vue d'ensemble et gestion du march\xe9"}),(0,d.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Besoins publi\xe9s"}),d.jsx("div",{className:"text-3xl font-bold",children:e.totalNeeds}),d.jsx("div",{className:"text-sm text-gray-600 mt-1",children:Object.entries(e.needsByStatus).map(([e,s])=>(0,d.jsxs)("span",{className:"mr-2",children:[e,": ",s]},e))})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Offres soumises"}),d.jsx("div",{className:"text-3xl font-bold",children:e.totalOffers}),(0,d.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Moyenne: ",e.averageOffersPerNeed.toFixed(1),"/besoin"]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Contrats actifs"}),(0,d.jsxs)("div",{className:"text-3xl font-bold",children:[e.activeContracts,"/",e.totalContracts]}),(0,d.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Taux: ",e.totalNeeds>0?(e.totalContracts/e.totalNeeds*100).toFixed(0):0,"%"]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Sites logistiques"}),d.jsx("div",{className:"text-3xl font-bold",children:e.totalSites}),d.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Capacit\xe9s disponibles"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("h3",{className:"font-semibold mb-4",children:"R\xe9partition par type de stockage"}),d.jsx("div",{className:"space-y-3",children:[{type:"Long terme",count:6,percent:40},{type:"Temporaire",count:4,percent:27},{type:"Picking",count:3,percent:20},{type:"Cross-dock",count:2,percent:13}].map(e=>(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[d.jsx("span",{children:e.type}),(0,d.jsxs)("span",{className:"text-gray-600",children:[e.count," contrats"]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${e.percent}%`}})})]},e.type))})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("h3",{className:"font-semibold mb-4",children:"Top r\xe9gions actives"}),d.jsx("div",{className:"space-y-3",children:[{region:"\xcele-de-France",count:5},{region:"Auvergne-Rh\xf4ne-Alpes",count:3},{region:"Hauts-de-France",count:2},{region:"Provence-Alpes-C\xf4te d'Azur",count:2}].map(e=>(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[d.jsx("span",{children:e.region}),d.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-medium",children:e.count})]},e.region))})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,d.jsxs)("a",{href:"/storage-market/needs",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"G\xe9rer les besoins"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Superviser toutes les publications"})]}),(0,d.jsxs)("a",{href:"/storage-market/logisticians",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"G\xe9rer les logisticiens"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Valider les abonnements"})]}),(0,d.jsxs)("a",{href:"/storage-market/analytics",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Analytics avanc\xe9s"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Rapports et statistiques"})]})]})]})}t(4989);let g=(0,i.l)(a,"default"),u=(0,i.l)(a,"getStaticProps"),x=(0,i.l)(a,"getStaticPaths"),p=(0,i.l)(a,"getServerSideProps"),b=(0,i.l)(a,"config"),j=(0,i.l)(a,"reportWebVitals"),v=(0,i.l)(a,"unstable_getStaticProps"),N=(0,i.l)(a,"unstable_getStaticPaths"),f=(0,i.l)(a,"unstable_getStaticParams"),y=(0,i.l)(a,"unstable_getServerProps"),w=(0,i.l)(a,"unstable_getServerSideProps"),P=new r.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/storage-market",pathname:"/storage-market",bundlePath:"",filename:""},components:{App:o.default,Document:l()},userland:a})},4989:(e,s,t)=>{"use strict";t.d(s,{q:()=>n});let a=process.env.NEXT_PUBLIC_STORAGE_MARKET_API_URL||"http://localhost:3013";async function r(e,s){let t={"Content-Type":"application/json",...s?.headers},r=await fetch(`${a}${e}`,{...s,headers:t});if(!r.ok)throw Error((await r.json().catch(()=>({error:"Unknown error"}))).error||`HTTP ${r.status}`);return r.json()}let n={getStats:async()=>(await r("/storage-market/admin/stats")).stats,getAllNeeds:async e=>{let s=new URLSearchParams;e?.status&&s.set("status",e.status),e?.ownerOrgId&&s.set("ownerOrgId",e.ownerOrgId);let t=s.toString(),a=t?`/storage-market/needs?${t}`:"/storage-market/needs";return(await r(a)).items},getNeed:async e=>(await r(`/storage-market/needs/${e}`)).need,moderateNeed:async(e,s)=>(await r(`/storage-market/needs/${e}`,{method:"PUT",body:JSON.stringify(s)})).need,getLogisticians:async()=>(await r("/storage-market/admin/logisticians")).items,approveLogistician:async e=>(await r(`/storage-market/admin/logisticians/${e}/approve`,{method:"POST"})).subscription,rejectLogistician:async(e,s)=>(await r(`/storage-market/admin/logisticians/${e}/reject`,{method:"POST",body:JSON.stringify({reason:s})})).subscription,suspendLogistician:async(e,s)=>(await r(`/storage-market/admin/logisticians/${e}/suspend`,{method:"POST",body:JSON.stringify({reason:s})})).subscription,getAllContracts:async e=>{let s=new URLSearchParams;e?.status&&s.set("status",e.status),e?.industrialId&&s.set("industrialId",e.industrialId),e?.logisticianId&&s.set("logisticianId",e.logisticianId);let t=s.toString(),a=t?`/storage-market/contracts?${t}`:"/storage-market/contracts";return(await r(a)).items},getContract:async e=>(await r(`/storage-market/contracts/${e}`)).contract,updateContractStatus:async(e,s,t)=>(await r(`/storage-market/contracts/${e}/status`,{method:"PUT",body:JSON.stringify({status:s,reason:t})})).contract,getOffersForNeed:async e=>(await r(`/storage-market/offers/${e}`)).items,getHealthMetrics:async()=>{let e=await n.getStats();return{averageResponseTime:0,successRate:e.activeContracts/e.totalContracts||0,activeUsers:0,totalRevenue:0}},exportToCSV:(e,s)=>{},generateMonthlyReport:async(e,s)=>{throw Error("\xc0 impl\xe9menter - endpoint avec filtres de date requis")}}},50:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(997);function r({Component:e,pageProps:s}){let t=process.env.NEXT_PUBLIC_SUPPORT_URL||"https://www.rt-technologie.com";return a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:"app-container",children:[a.jsx("header",{className:"app-header",children:(0,a.jsxs)("div",{className:"header-content",children:[(0,a.jsxs)("a",{href:"/",className:"logo",children:[a.jsx("div",{className:"logo-icon",children:"RT"}),a.jsx("span",{children:"Backoffice Admin"})]}),(0,a.jsxs)("nav",{className:"main-nav",children:[a.jsx("a",{href:"/",className:"nav-link",children:"Accueil"}),a.jsx("a",{href:"/orgs",className:"nav-link",children:"Organisations"}),a.jsx("a",{href:"/pricing",className:"nav-link",children:"Tarifs"}),a.jsx("a",{href:"/palettes",className:"nav-link",children:"Palettes"}),a.jsx("a",{href:"/health",className:"nav-link",children:"\xc9tat"}),a.jsx("a",{href:t,target:"_blank",rel:"noreferrer",className:"nav-link",children:"Support"}),a.jsx("a",{href:"/login",className:"btn btn-primary btn-sm",children:"Se connecter"})]})]})}),a.jsx("main",{className:"main-content",children:a.jsx(e,{...s})})]})})}t(1882)},1882:()=>{},2933:(e,s)=>{"use strict";var t;Object.defineProperty(s,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},1017:e=>{"use strict";e.exports=require("path")}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[801],()=>t(7063));module.exports=a})();