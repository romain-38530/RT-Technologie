(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[726],{1841:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orgs",function(){return n(8513)}])},8513:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return r}});var a=n(7458),t=n(2983);function r(){let[e,s]=(0,t.useState)(""),[n,r]=(0,t.useState)(!1),[d,l]=(0,t.useState)([]),[i,c]=(0,t.useState)(null),o=async()=>{r(!0),c(null);try{let s={};{let e=window.localStorage.getItem("admin_jwt");e&&(s.authorization="Bearer ".concat(e))}let n=await fetch("".concat("http://3.76.34.154:3000","/admin/orgs?query=").concat(encodeURIComponent(e)),{headers:s}),a=await n.json();l(a.items||[])}catch(e){c(e.message||"Erreur r\xe9seau")}finally{r(!1)}};(0,t.useEffect)(()=>{o()},[]);let h=e=>({active:"badge-success",pending:"badge-warning",suspended:"badge-danger",inactive:"badge-secondary"})[e.toLowerCase()]||"badge-secondary";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"card-header",style:{border:"none",paddingLeft:0},children:[(0,a.jsx)("h2",{className:"card-title",style:{fontSize:"1.75rem"},children:"Organisations"}),(0,a.jsx)("p",{className:"card-subtitle",children:"G\xe9rez les organisations et leurs abonnements"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)("input",{className:"form-input",value:e,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||n||o()},placeholder:"Rechercher par nom, email ou ID...",style:{flex:1},disabled:n}),(0,a.jsx)("button",{className:"btn btn-primary",onClick:o,disabled:n,children:n?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"loading"}),(0,a.jsx)("span",{style:{marginLeft:"0.5rem"},children:"Recherche..."})]}):"Rechercher"})]}),i&&(0,a.jsxs)("div",{style:{padding:"1rem",background:"#fee2e2",color:"#991b1b",borderRadius:"8px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,a.jsx)("span",{children:"⚠️"}),(0,a.jsx)("span",{children:i})]}),0!==d.length||n||i?(0,a.jsx)("div",{className:"table-container",children:(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"Nom"}),(0,a.jsx)("th",{children:"R\xf4le"}),(0,a.jsx)("th",{children:"Statut"}),(0,a.jsx)("th",{children:"Plan"}),(0,a.jsx)("th",{children:"Addons"}),(0,a.jsx)("th",{style:{textAlign:"right"},children:"Actions"})]})}),(0,a.jsx)("tbody",{children:d.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("code",{style:{background:"var(--bg-secondary)",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.8125rem",fontFamily:"monospace"},children:e.id.substring(0,8)})}),(0,a.jsx)("td",{style:{fontWeight:500},children:e.name}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"badge badge-secondary",children:e.role})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"badge ".concat(h(e.status)),children:e.status})}),(0,a.jsx)("td",{children:e.plan?(0,a.jsx)("span",{className:"badge badge-info",children:e.plan}):(0,a.jsx)("span",{style:{color:"var(--text-muted)"},children:"-"})}),(0,a.jsx)("td",{children:e.addons&&e.addons.length>0?(0,a.jsx)("div",{className:"flex gap-2",style:{flexWrap:"wrap"},children:e.addons.map((e,s)=>(0,a.jsx)("span",{className:"badge badge-secondary",style:{fontSize:"0.6875rem"},children:e},s))}):(0,a.jsx)("span",{style:{color:"var(--text-muted)"},children:"-"})}),(0,a.jsx)("td",{style:{textAlign:"right"},children:(0,a.jsx)("a",{href:"/orgs/".concat(e.id),className:"btn btn-sm btn-outline",children:"Ouvrir"})})]},e.id))})]})}):(0,a.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-secondary)"},children:[(0,a.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\uD83D\uDCED"}),(0,a.jsx)("p",{children:"Aucune organisation trouv\xe9e"})]}),d.length>0&&(0,a.jsxs)("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[d.length," organisation",d.length>1?"s":""," trouv\xe9e",d.length>1?"s":""]})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1841)}),_N_E=e.O()}]);